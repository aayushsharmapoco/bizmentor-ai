<!DOCTYPE html>
<html>
<head>
  <title>BizMentor AI</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center px-4">

  <!-- Card -->
  <div class="bg-white p-6 rounded shadow-md w-full max-w-xl text-center">
    
    <!-- Image -->
    <img src="{{ url_for('static', filename='images/landing.png') }}" alt="BizMentor AI" class="w-full mb-4 rounded">

    <!-- Header -->
    <h1 class="text-2xl font-bold mb-4">BizMentor AI</h1>

    <!-- Form -->
    <form method="POST" class="flex flex-col gap-4">
      <input name="user_input" type="text" placeholder="Ask your business question..." required
        class="border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      <button type="submit"
        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded">
        Ask
      </button>
    </form>

    <!-- ðŸŽ¤ Voice Assistant Button -->
    <button onclick="startListening()" class="bg-green-500 hover:bg-green-600 text-white font-semibold px-4 py-2 rounded mt-4">
      ðŸŽ¤ Speak
    </button>

    <!-- AI Response -->
    {% if response %}
    <div class="mt-6 p-4 bg-gray-100 rounded text-left">
      <h2 class="font-bold text-gray-700 mb-2">AI Response:</h2>
      <p>{{ response }}</p>
    </div>
    {% endif %}
  </div>

  <!-- Voice Script -->
  <script>
    // ðŸŽ¤ Speech to Text
    function startListening() {
      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = 'en-US';
      recognition.start();

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        document.querySelector('input[name="user_input"]').value = transcript;
        document.querySelector('form').submit();
      };
    }

    // ðŸ”Š Text to Speech (AI Response)
    window.addEventListener('DOMContentLoaded', () => {
      const responseText = "{{ response|default('') }}";
      if (responseText) {
        const utterance = new SpeechSynthesisUtterance(responseText);
        speechSynthesis.speak(utterance);
      }
    });
  </script>
</body>
</html>